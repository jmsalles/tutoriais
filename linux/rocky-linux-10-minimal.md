---
title: "Guia ‚Äî Instala√ß√£o & P√≥s-instala√ß√£o do Rocky Linux 10 Minimal"
parent: Linux
nav_order: 1
---
# üöÄ Guia ‚Äî Instala√ß√£o & P√≥s-instala√ß√£o do Rocky Linux 10 Minimal (com explica√ß√µes)

## üìå Resumo
Procedimento **padr√£o** para instalar (em **modo texto**) e preparar o **Rocky Linux 10 minimal** para uso profissional. Inclui:
- Reposit√≥rios (EPEL/CRB), DNF e atualiza√ß√£o segura.
- **Pacotes base** com **explica√ß√£o do porqu√™** de cada um.
- Rede/diagn√≥stico, **toolchain** de compila√ß√£o, containers (Podman/Buildah/Skopeo).
- SELinux, Firewall (por **servi√ßo/porta/protocolo**), **timezone** e NTP (chrony).
- Virtualiza√ß√£o (KVM/libvirt) e **p√≥s-reboot** (tuned, fstrim, sysctl).
- Checklist final e troubleshooting r√°pido.

> üéØ Esta s√©rie abordar√° **Linux, containers, Portainer, Kubernetes, WebLogic, JBoss, certifica√ß√µes, ecossistema Red Hat** e **boas pr√°ticas**.

---

## üìë Sum√°rio
- [üß≠ Vis√£o geral e objetivos](#-vis√£o-geral-e-objetivos)
- [üíø Instala√ß√£o (modo texto)](#-instala√ß√£o-modo-texto)
- [üîÑ DNF, CRB e EPEL](#-dnf-crb-e-epel)
- [üõ†Ô∏è Pacotes base (com explica√ß√µes)](#Ô∏è-pacotes-base-com-explica√ß√µes)
- [üåê Rede e diagn√≥stico (com explica√ß√µes)](#-rede-e-diagn√≥stico-com-explica√ß√µes)
- [‚öôÔ∏è Compila√ß√£o e toolchain (com explica√ß√µes)](#Ô∏è-compila√ß√£o-e-toolchain-com-explica√ß√µes)
- [üîí SELinux: checar, alterar e observa√ß√µes](#-selinux-checar-alterar-e-observa√ß√µes)
- [üî• Firewalld: por servi√ßo, porta e protocolo](#-firewalld-por-servi√ßo-porta-e-protocolo)
- [‚è∞ Timezone e NTP (chrony)](#-timezone-e-ntp-chrony)
- [üíª Virtualiza√ß√£o (KVM/libvirt)](#-virtualiza√ß√£o-kvmlibvirt)
- [üê≥ Containers (Podman/Buildah/Skopeo)](#-containers-podmanbuildahskopeo)
- [üß∞ Extras √∫teis do dia a dia](#-extras-√∫teis-do-dia-a-dia)
- [üîß P√≥s-reboot: tuned, fstrim e sysctl](#-p√≥sreboot-tuned-fstrim-e-sysctl)
- [üß™ Checklist final](#-checklist-final)
- [ü©∫ Troubleshooting r√°pido](#-troubleshooting-r√°pido)
- [‚úÖ Conclus√£o](#-conclus√£o)

---

## üß≠ Vis√£o geral e objetivos
- **Minimal** = menor superf√≠cie de ataque + desempenho + controle.
- Base ideal para **JBoss/WebLogic**, **containers** e **Kubernetes**.
- Alinhado ao ecossistema **RHEL/Red Hat**.

---

## üíø Instala√ß√£o (modo texto)
1) Baixe a ISO **Minimal** no site oficial.  
2) Boot pela m√≠dia e selecione **modo texto** (text mode).
3) Durante a instala√ß√£o:
   - Idioma/teclado conforme prefer√™ncia.
   - **Particionamento**: LVM recomendado em servidor.
   - Defina senha do `root` e crie usu√°rio admin (que entra no sudo).
   - Selecione **Minimal Install**.
4) Finalize e **reinicie**.

> Dica: em ambientes cr√≠ticos, separe `/var`, `/home`, `/tmp` e habilite LVM para snapshots/migra√ß√£o.

---

## üîÑ DNF, CRB e EPEL
Habilite plugins e reposit√≥rios adicionais essenciais.

```bash
sudo dnf -y update
sudo dnf -y install dnf-plugins-core
sudo dnf config-manager --set-enabled crb
sudo dnf -y install epel-release
```

**Por que isso?**  
- `dnf-plugins-core`: habilita `config-manager`, repos extras e recursos de gest√£o.  
- `crb`: (CodeReady Builder) oferece bibliotecas/headers √∫teis para builds.  
- `epel-release`: prov√™ muitos utilit√°rios mantidos pela comunidade (qualidade alta).

---

## üõ†Ô∏è Pacotes base (com explica√ß√µes)

```bash
sudo dnf -y install \
  vim-enhanced bash-completion \
  man-db man-pages \
  less tree which \
  tar zip unzip bzip2 xz pigz p7zip p7zip-plugins \
  wget curl rsync \
  openssh-clients ca-certificates
```

**Por que cada um?**
- `vim-enhanced`: editor padr√£o para **editar configs** (recomendado em servidores).  
- `bash-completion`: autocompletar para comandos/argumentos ‚Äî reduz erros e agiliza.  
- `man-db` `man-pages`: manuais offline (indispens√°vel em ambiente fechado).  
- `less`: pager eficiente para logs e sa√≠das longas.  
- `tree`: visualiza estrutura de diret√≥rios rapidamente.  
- `which`: localiza bin√°rios no `PATH`.  
- `tar` `zip` `unzip` `bzip2` `xz` `pigz` `p7zip*`: **compress√£o** (inclui paralela via `pigz`) e formatos legados.  
- `wget` `curl`: download e **testes HTTP/HTTPS/APIs**.  
- `rsync`: sincroniza√ß√£o eficiente (backups/deploys).  
- `openssh-clients`: `ssh`, `scp`, `sftp` ‚Äî acesso remoto seguro.  
- `ca-certificates`: cadeia de certificados atualizada (TLS/HTTPS sem dor de cabe√ßa).

> Dica: torne o `vim` seu editor padr√£o no shell do usu√°rio:
>
> ```bash
> echo 'export EDITOR=vim' | sudo tee -a /etc/profile.d/99-editor.sh
> ```

---

## üåê Rede e diagn√≥stico (com explica√ß√µes)

```bash
sudo dnf -y install \
  iproute iputils net-tools ethtool \
  nmap-ncat nmap tcpdump traceroute mtr \
  bind-utils socat telnet \
  lsof strace htop iotop perf \
  policycoreutils setools-console
```

**Por que cada um?**
- `iproute` `iputils`: `ip`, `ping` ‚Äî **base moderna** de rede.  
- `net-tools`: `ifconfig`, `netstat` (legado, ainda √∫til em troubleshooting e scripts).  
- `ethtool`: estat√≠sticas e tunables de interface (offloads, velocidade, duplex).  
- `nmap-ncat` `nmap`: verifica√ß√£o de portas e servi√ßos; `ncat` para testes de socket.  
- `tcpdump`: captura de pacotes ‚Äî a ‚Äúlupa‚Äù da rede.  
- `traceroute` `mtr`: rota/lat√™ncia com vis√£o cont√≠nua (MTR √© ouro).  
- `bind-utils`: `dig`, `nslookup` ‚Äî **DNS** sem adivinha√ß√£o.  
- `socat` `telnet`: testes de conectividade bruta e tunelamentos r√°pidos.  
- `lsof`: quem abriu qual arquivo/porta.  
- `strace`: rastreia chamadas de sistema (debug fino de processos).  
- `htop` `iotop`: vis√£o clara de CPU/mem√≥ria e **I/O** por processo.  
- `perf`: profiling de desempenho no kernel/userland.  
- `policycoreutils` `setools-console`: inspecionar/gerir **SELinux** por CLI.

---

## ‚öôÔ∏è Compila√ß√£o e toolchain (com explica√ß√µes)

```bash
sudo dnf -y groupinstall "Development Tools"

sudo dnf -y install \
  gcc gcc-c++ make cmake ninja-build \
  pkgconf pkgconf-pkg-config \
  autoconf automake libtool \
  kernel-headers kernel-devel \
  elfutils-libelf-devel \
  openssl-devel zlib-devel \
  libffi-devel bison flex \
  python3 python3-pip
```

**Por que cada um?**
- **Group ‚ÄúDevelopment Tools‚Äù**: metapacote que traz `gcc`, `make`, `gdb`, etc.  
- `gcc` `gcc-c++`: compiladores C/C++.  
- `make` `cmake` `ninja-build`: sistemas de build (cl√°ssico e modernos).  
- `pkgconf*`: resolve depend√™ncias de compila√ß√£o (`*.pc`).  
- `autoconf` `automake` `libtool`: toolchain de projetos autoconf.  
- `kernel-headers` `kernel-devel`: headers e fontes m√≠nimos para **m√≥dulos/DRM**.  
- `elfutils-libelf-devel`: manipula√ß√£o ELF (drivers/m√≥dulos costumam exigir).  
- `openssl-devel` `zlib-devel` `libffi-devel`: libs comuns para compilar CLIs/daemons.  
- `bison` `flex`: geradores de parser/lexer.  
- `python3` `python3-pip`: automa√ß√£o, CLIs e utilit√°rios escritos em Python.

> Dica: em produ√ß√£o, instale toolchain **s√≥ quando necess√°rio** (reduz superf√≠cie de ataque).

---

## üîí SELinux: checar, alterar e observa√ß√µes

Checar status:
```bash
getenforce
```

Para **desativar permanentemente** (quando **explicitamente necess√°rio**):
```bash
sudo vim /etc/selinux/config
```

Altere:
```bash
SELINUX=disabled
```

Reinicie:
```bash
sudo reboot
```

> ‚ö†Ô∏è **Recomenda√ß√£o**: prefira manter **Enforcing** e corrigir contextos/booleans. Desativar √© √∫ltimo recurso, mas est√° aqui porque muitos ambientes legados exigem.

---

## üî• Firewalld: por servi√ßo, porta e protocolo

Instalar/ativar:
```bash
sudo dnf -y install firewalld
sudo systemctl enable --now firewalld
```

**Por servi√ßo** (mapeia m√∫ltiplas portas conhecidas):
```bash
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --permanent --add-service=ssh
sudo firewall-cmd --permanent --add-service=cockpit
sudo firewall-cmd --reload
```

**Por porta** (ex.: app em 8080/TCP):
```bash
sudo firewall-cmd --permanent --add-port=8080/tcp
sudo firewall-cmd --reload
```

**Por protocolo** (ex.: ICMP):
```bash
sudo firewall-cmd --permanent --add-protocol=icmp
sudo firewall-cmd --reload
```

> Dicas √∫teis:
> ```bash
> sudo firewall-cmd --get-services         # lista servi√ßos conhecidos
> sudo firewall-cmd --list-all             # o que est√° liberado no runtime
> sudo firewall-cmd --runtime-to-permanent # salva o runtime no permanente
> ```

---

## ‚è∞ Timezone e NTP (chrony)

```bash
sudo dnf -y install chrony
sudo systemctl enable --now chronyd
sudo timedatectl set-timezone America/Sao_Paulo
sudo timedatectl set-ntp true
```

Ajustar servidores (opcional):
```bash
sudo vim /etc/chrony.conf
# adicione/ajuste servers pool.ntp.org ou sua NTP interna
```

Ver fontes:
```bash
chronyc sources -v
```

---

## üíª Virtualiza√ß√£o (KVM/libvirt)

```bash
sudo dnf -y install \
  qemu-kvm libvirt virt-install virt-viewer libvirt-client
sudo systemctl enable --now libvirtd
```

Adicionar seu usu√°rio ao grupo (login novo para surtir efeito):
```bash
sudo usermod -aG libvirt $USER
```

Verificar:
```bash
virsh list --all
```

> Dica: para **bridge** e redes avan√ßadas use `nmcli`/`virsh net-*` e valide MTU/VLANs conforme seu ambiente.

---

## üê≥ Containers (Podman/Buildah/Skopeo)

```bash
sudo dnf -y install podman buildah skopeo crun
```

Testes r√°pidos:
```bash
podman info
podman run --rm registry.access.redhat.com/ubi9/ubi echo OK
```

- **Podman**: runtime sem daemon (root/rootless).  
- **Buildah**: **build** de imagens sem Dockerfile ou com, focado em seguran√ßa.  
- **Skopeo**: **copiar/inspecionar** imagens entre registries (sem pull local).  
- **crun**: runtime leve/perform√°tico (cgroups v2).

---

## üß∞ Extras √∫teis do dia a dia

```bash
sudo dnf -y install \
  git jq yq \
  parted lvm2 smartmontools \
  atop ncdu
```

**Por que cada um?**
- `git`: versionar infra/playbooks e clonar tutoriais.  
- `jq` `yq`: manipular **JSON/YAML** (APIs, K8s, Ansible).  
- `parted` `lvm2`: discos/parti√ß√µes e **LVM** (expandir volumes sem downtime).  
- `smartmontools`: sa√∫de do disco (SMART).  
- `atop`: vis√£o de performance por subsistema (√∫til para RCA).  
- `ncdu`: ‚Äúdu‚Äù visual para achar consumo de disco.

---

## üîß P√≥s-reboot: tuned, fstrim e sysctl
**Perfis de desempenho** (servidor):
```bash
sudo dnf -y install tuned
sudo systemctl enable --now tuned
sudo tuned-adm profile throughput-performance
sudo tuned-adm active
```

**TRIM peri√≥dico** (SSD/NVMe):
```bash
systemctl status fstrim.timer || sudo systemctl enable --now fstrim.timer
```

**Sysctl b√°sicos e conservadores**:
```bash
sudo vim /etc/sysctl.d/90-server.conf
```

Exemplo:
```bash
# Reduz swapping agressivo em servidor
vm.swappiness = 10

# Melhora filas de rede em cargas paralelas (ajuste conforme testes)
net.core.somaxconn = 1024
net.core.netdev_max_backlog = 4096

# Evita que mem√≥ria ‚Äúsuja‚Äù cres√ßa demais antes de flush
vm.dirty_ratio = 15
vm.dirty_background_ratio = 5
```

Aplicar:
```bash
sudo sysctl --system
```

> ‚öñÔ∏è Sempre **teste** em homologa√ß√£o antes de levar sysctl para produ√ß√£o.

---

## üß™ Checklist final

```bash
# DNF/Repos
dnf check-update || true
dnf repolist

# Ferramentas essenciais
vim --version | head -n1
bash --version | head -n1
curl --version | head -n1
rsync --version | head -n1

# SELinux / Firewall
getenforce
sudo firewall-cmd --list-all

# Tempo
timedatectl
chronyc tracking

# Virtualiza√ß√£o
groups $USER | tr ' ' '\n' | grep libvirt || echo "adicione $USER ao grupo libvirt"
virsh list --all

# Containers
podman info | grep -E 'ociVersion|cgroupVersion' -n
```

---

## ü©∫ Troubleshooting r√°pido
- **Sem rede ap√≥s instala√ß√£o minimal**: verifique `nmcli connection show`, ative `NetworkManager` e configure DHCP/IP.  
- **SELinux bloqueando servi√ßo**: cheque `sudo ausearch -m AVC -ts recent` e ajuste contexto/booleans; **desativar** s√≥ se necess√°rio.  
- **Firewall liberado mas porta ‚Äúfechada‚Äù**: confirme servi√ßo **ouvindo** (`ss -lntup`) e **zona** aplicada √† interface (`nmcli connection show`).  
- **DNS estranho**: valide `/etc/resolv.conf` (evite m√∫ltiplos DNS conflitantes).  
- **Hora fora do eixo**: `timedatectl`, `chronyc sources -v` e regras de firewall para NTP (UDP/123).

---

## ‚úÖ Conclus√£o
Com este procedimento, seu **Rocky Linux 10 minimal** sai do zero para um estado **pronto para produ√ß√£o**: atualizado, seguro, instrumentado e com ferramentas s√≥lidas para **containers**, **virtualiza√ß√£o** e **middleware** ‚Äî terreno f√©rtil para **Portainer, Kubernetes, WebLogic, JBoss** e todo o **ecossistema Red Hat**.

---

Criado por **Jeferson Salles**  
üîó LinkedIn: https://www.linkedin.com/in/jmsalles/  
üìß E-mail: jefersonmattossalles@gmail.com
````
